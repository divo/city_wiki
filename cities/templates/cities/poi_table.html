{% if pois %}
    <div class="table-responsive">
        <table class="poi-table">
            <thead>
                <tr>
                    <th>
                        <a href="?sort=name&dir={% if sort_by == 'name' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Name {% if sort_by == 'name' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=rank&dir={% if sort_by == 'rank' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Rank {% if sort_by == 'rank' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=sub_category&dir={% if sort_by == 'sub_category' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Sub-category {% if sort_by == 'sub_category' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=district&dir={% if sort_by == 'district' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            District {% if sort_by == 'district' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=description&dir={% if sort_by == 'description' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Description {% if sort_by == 'description' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>Coords</th>
                    <th>
                        <a href="?sort=address&dir={% if sort_by == 'address' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Address {% if sort_by == 'address' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=phone&dir={% if sort_by == 'phone' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Contact {% if sort_by == 'phone' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=hours&dir={% if sort_by == 'hours' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Hours {% if sort_by == 'hours' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=website&dir={% if sort_by == 'website' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Website {% if sort_by == 'website' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                    <th>
                        <a href="?sort=created_at&dir={% if sort_by == 'created_at' and sort_dir == 'asc' %}desc{% else %}asc{% endif %}{% if max_rank %}&max_rank={{ max_rank }}{% endif %}{% if selected_district %}&district={{ selected_district }}{% endif %}">
                            Created at {% if sort_by == 'created_at' %}{% if sort_dir == 'asc' %}↑{% else %}↓{% endif %}{% endif %}
                        </a>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for poi in pois %}
                    <tr>
                        <td {% if not poi.name %}class="empty-cell"{% endif %}>
                            <strong>{{ poi.name|default:"" }}</strong>
                            {% if poi.website %}
                                <br><a href="{{ poi.website }}" target="_blank">Website</a>
                            {% endif %}
                        </td>
                        <td {% if not poi.rank %}class="empty-cell"{% endif %}>{{ poi.rank|default:"" }}</td>
                        <td {% if not poi.sub_category %}class="empty-cell"{% endif %}>{{ poi.sub_category|default:"" }}</td>
                        <td {% if not poi.district %}class="empty-cell"{% endif %}>
                            {{ poi.district.name|default:"Main City" }}
                            {% if poi.district.parent_district %}
                                <br><small>(Part of {{ poi.district.parent_district.name }})</small>
                            {% endif %}
                        </td>
                        <td {% if not poi.description %}class="empty-cell"{% endif %}>{{ poi.description|truncatewords:30|default:"" }}</td>
                        <td {% if not poi.latitude and not poi.longitude %}class="empty-cell"{% endif %}>
                            {% if poi.latitude and poi.longitude %}
                                {{ poi.latitude }}, {{ poi.longitude }}
                            {% endif %}
                        </td>
                        <td {% if not poi.address %}class="empty-cell"{% endif %}>
                            {{ poi.address|default:"" }}
                        </td>
                        <td {% if not poi.phone %}class="empty-cell"{% endif %}>
                            {{ poi.phone|default:"" }}
                        </td>
                        <td {% if not poi.hours %}class="empty-cell"{% endif %}>
                            {{ poi.hours|default:"" }}
                        </td>
                        <td {% if not poi.website %}class="empty-cell"{% endif %}>
                            {% if poi.website %}
                                <a href="{{ poi.website }}" target="_blank">Website</a>
                            {% endif %}
                        </td>
                        <td {% if not poi.created_at %}class="empty-cell"{% endif %}>{{ poi.created_at|default:"" }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p>No points of interest in this category.</p>
{% endif %} 